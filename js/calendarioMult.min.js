/*!
 * calendarioMult.js v1.2
 * autor: Andres Espinosa
 * (c) 2019 calendarioMult.js Contributors
 * Released under the MIT License
 */
function calendarioMult(a){if(a.obj)if(""!=a.obj){if(clase=a.obj,a.cant&&a.cant?cant=a.cant:cant=12,a.mes)if(""!=a.mes)mes=a.mes;else{var e=(new Date).getMonth();mes=e+1}else{e=(new Date).getMonth();mes=e+1}if(a.year)if(""!=a.year)l=a.year;else var l=(new Date).getFullYear();else l=(new Date).getFullYear();a.idioma&&""!=a.idioma?idioma=a.idioma:idioma="ES_es",a.dir&&""!=a.dir?(dir=a.dir,$(clase).html(""),$.getJSON(dir+idioma+".json",function(e){var i=e.meses,c=e.dsemana;for(text="",yearp=l,ms=0;ms<cant;ms++){for(m=mes+ms,m>12&&(yearp=l+Math.floor(m/12),m-=12*Math.floor(m/12),0==m&&(m=12,yearp-=1)),mr=m-1,fecha=new Date(yearp,mr,1,10,33,30,0),sdia=fecha.getDay(),udia=27,u=udia;u<=31;u++)1==existeFecha(u+"/"+m+"/"+yearp)&&(udia=u);for(semanario='<table class="semanario">',semanario+='<tr><th onClick="calDias(0,'+m+","+yearp+')">'+c[0]+'</th><th onClick="calDias(1,'+m+","+yearp+')">'+c[1]+'</th><th onClick="calDias(2,'+m+","+yearp+')">'+c[2]+'</th><th onClick="calDias(3,'+m+","+yearp+')">'+c[3]+'</th><th onClick="calDias(4,'+m+","+yearp+')">'+c[4]+'</th><th onClick="calDias(5,'+m+","+yearp+')">'+c[5]+'</th><th onClick="calDias(6,'+m+","+yearp+')">'+c[6]+"</th></tr>",t=0,d=1;d<=udia;d++)for(q=0,me=m,m<10&&(me="0"+m),di=d,d<10&&(di="0"+d),s=0;s<=6;s++)0==q&&(1==d&&s==sdia?(0==s&&(t++,semanario+="<tr>"),semanario+='<td class="calAvailable" id="cal_'+d+"_"+m+"_"+yearp+"_"+s+'" data-fecha="'+yearp+"-"+me+"-"+di+'" onClick="calAvailable(this);">'+d+"</td>",q=1):d>1&&s==sdia?(0==s&&(t++,semanario+="<tr>"),semanario+='<td class="calAvailable" id="cal_'+d+"_"+m+"_"+yearp+"_"+s+'" data-fecha="'+yearp+"-"+me+"-"+di+'" onClick="calAvailable(this);">'+d+"</td>",q=1):1==d&&(0==s&&(t++,semanario+="<tr>"),semanario+="<td></td>"),6==s&&(semanario+="</tr>"),s==sdia&&(sdia++,6==s&&(sdia=0)));5==t&&(semanario+="<tr><td></td></tr>"),semanario+="</table>",text+='<div class="col-md-4"><div class="card"><div class="card-header"><h3 class="card-title"><b>'+i[m]+" "+yearp+'</b></h3></div><div class="card-body">'+semanario+"</div></div></div>"}$(clase).html('<div class="row">'+text+"</div>"),calMult_date(a.fechas)})):console.error("Debe colocar la ruta del elemento JS de calendarioMult")}else console.error("Debe colocar el id o la clase del elemento contenedor");else console.error("Debe colocar el id o la clase del elemento contenedor")}function existeFecha(a){var e=a.split("/"),t=e[0],l=e[1],i=e[2];return!(t-0>new Date(i,l,"0").getDate()-0)}function calAvailable(a){if(id=a.id,fecha=a.dataset.fecha,$("#"+id).hasClass("calActive")){$("#"+id).removeClass("calActive");var e=fechascalendarioMulti.indexOf(fecha);fechascalendarioMulti.splice(e,1)}else $("#"+id).addClass("calActive"),fechascalendarioMulti.push(fecha)}function calMult_getData(){return fechascalendarioMulti.sort()}function calDias(a,e,t){for(d=0;d<=31;d++)document.getElementById("cal_"+d+"_"+e+"_"+t+"_"+a)&&calAvailable(document.getElementById("cal_"+d+"_"+e+"_"+t+"_"+a))}function calMult_date(a){for(d=0;d<a.length;d++)for(date=a[d].split("-"),fecha=new Date(date[0],date[1],date[2]),year=fecha.getFullYear(),mes=fecha.getMonth(),dia=fecha.getDate(),s=0;s<=6;s++)document.getElementById("cal_"+dia+"_"+mes+"_"+year+"_"+s)&&calAvailable(document.getElementById("cal_"+dia+"_"+mes+"_"+year+"_"+s))}fechascalendarioMulti=[];